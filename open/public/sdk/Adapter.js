/*!
 * qspace-adapter v1.2.0
 * Thu Nov 07 2024 10:28:49 GMT+0800 (中国标准时间)
 * (c) 2024-2024 3dnest
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Adapter={})}(this,(function(e){"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function a(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(){s=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),l=new k(r||[]);return o(a,"_invoke",{value:R(e,n,l)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var d="suspendedStart",h="suspendedYield",_="executing",v="completed",m={};function g(){}function y(){}function b(){}var w={};u(w,a,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(T([])));O&&O!==n&&r.call(O,a)&&(w=O);var x=b.prototype=g.prototype=Object.create(w);function I(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(o,i,a,l){var c=f(e[o],e,i);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function R(t,n,r){var o=d;return function(i,a){if(o===_)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var c=N(l,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=_;var s=f(t,n,r);if("normal"===s.type){if(o=r.done?v:h,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=v,r.method="throw",r.arg=s.arg)}}}function N(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},I(L.prototype),u(L.prototype,l,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new L(p(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},I(x),u(x,c,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}var _={exports:{}},v={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},m="object"===("undefined"==typeof process?"undefined":d(process))&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).error.apply(e,["SEMVER"].concat(n))}:function(){},g=m;!function(e,t){var n=v.MAX_SAFE_COMPONENT_LENGTH,r=v.MAX_SAFE_BUILD_LENGTH,o=v.MAX_LENGTH,i=g,a=(t=e.exports={}).re=[],l=t.safeRe=[],c=t.src=[],s=t.t={},p=0,f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",o],[f,r]],h=function(e,t,n){var r=function(e){for(var t=0,n=d;t<n.length;t++){var r=u(n[t],2),o=r[0],i=r[1];e=e.split("".concat(o,"*")).join("".concat(o,"{0,").concat(i,"}")).split("".concat(o,"+")).join("".concat(o,"{1,").concat(i,"}"))}return e}(t),o=p++;i(e,o,t),s[e]=o,c[o]=t,a[o]=new RegExp(t,n?"g":void 0),l[o]=new RegExp(r,n?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(f,"*")),h("MAINVERSION","(".concat(c[s.NUMERICIDENTIFIER],")\\.")+"(".concat(c[s.NUMERICIDENTIFIER],")\\.")+"(".concat(c[s.NUMERICIDENTIFIER],")")),h("MAINVERSIONLOOSE","(".concat(c[s.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(c[s.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(c[s.NUMERICIDENTIFIERLOOSE],")")),h("PRERELEASEIDENTIFIER","(?:".concat(c[s.NUMERICIDENTIFIER],"|").concat(c[s.NONNUMERICIDENTIFIER],")")),h("PRERELEASEIDENTIFIERLOOSE","(?:".concat(c[s.NUMERICIDENTIFIERLOOSE],"|").concat(c[s.NONNUMERICIDENTIFIER],")")),h("PRERELEASE","(?:-(".concat(c[s.PRERELEASEIDENTIFIER],"(?:\\.").concat(c[s.PRERELEASEIDENTIFIER],")*))")),h("PRERELEASELOOSE","(?:-?(".concat(c[s.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(c[s.PRERELEASEIDENTIFIERLOOSE],")*))")),h("BUILDIDENTIFIER","".concat(f,"+")),h("BUILD","(?:\\+(".concat(c[s.BUILDIDENTIFIER],"(?:\\.").concat(c[s.BUILDIDENTIFIER],")*))")),h("FULLPLAIN","v?".concat(c[s.MAINVERSION]).concat(c[s.PRERELEASE],"?").concat(c[s.BUILD],"?")),h("FULL","^".concat(c[s.FULLPLAIN],"$")),h("LOOSEPLAIN","[v=\\s]*".concat(c[s.MAINVERSIONLOOSE]).concat(c[s.PRERELEASELOOSE],"?").concat(c[s.BUILD],"?")),h("LOOSE","^".concat(c[s.LOOSEPLAIN],"$")),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE","".concat(c[s.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),h("XRANGEIDENTIFIER","".concat(c[s.NUMERICIDENTIFIER],"|x|X|\\*")),h("XRANGEPLAIN","[v=\\s]*(".concat(c[s.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(c[s.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(c[s.XRANGEIDENTIFIER],")")+"(?:".concat(c[s.PRERELEASE],")?").concat(c[s.BUILD],"?")+")?)?"),h("XRANGEPLAINLOOSE","[v=\\s]*(".concat(c[s.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(c[s.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(c[s.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(c[s.PRERELEASELOOSE],")?").concat(c[s.BUILD],"?")+")?)?"),h("XRANGE","^".concat(c[s.GTLT],"\\s*").concat(c[s.XRANGEPLAIN],"$")),h("XRANGELOOSE","^".concat(c[s.GTLT],"\\s*").concat(c[s.XRANGEPLAINLOOSE],"$")),h("COERCEPLAIN","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")),h("COERCE","".concat(c[s.COERCEPLAIN],"(?:$|[^\\d])")),h("COERCEFULL",c[s.COERCEPLAIN]+"(?:".concat(c[s.PRERELEASE],")?")+"(?:".concat(c[s.BUILD],")?")+"(?:$|[^\\d])"),h("COERCERTL",c[s.COERCE],!0),h("COERCERTLFULL",c[s.COERCEFULL],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM","(\\s*)".concat(c[s.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",h("TILDE","^".concat(c[s.LONETILDE]).concat(c[s.XRANGEPLAIN],"$")),h("TILDELOOSE","^".concat(c[s.LONETILDE]).concat(c[s.XRANGEPLAINLOOSE],"$")),h("LONECARET","(?:\\^)"),h("CARETTRIM","(\\s*)".concat(c[s.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",h("CARET","^".concat(c[s.LONECARET]).concat(c[s.XRANGEPLAIN],"$")),h("CARETLOOSE","^".concat(c[s.LONECARET]).concat(c[s.XRANGEPLAINLOOSE],"$")),h("COMPARATORLOOSE","^".concat(c[s.GTLT],"\\s*(").concat(c[s.LOOSEPLAIN],")$|^$")),h("COMPARATOR","^".concat(c[s.GTLT],"\\s*(").concat(c[s.FULLPLAIN],")$|^$")),h("COMPARATORTRIM","(\\s*)".concat(c[s.GTLT],"\\s*(").concat(c[s.LOOSEPLAIN],"|").concat(c[s.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE","^\\s*(".concat(c[s.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(c[s.XRANGEPLAIN],")")+"\\s*$"),h("HYPHENRANGELOOSE","^\\s*(".concat(c[s.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(c[s.XRANGEPLAINLOOSE],")")+"\\s*$"),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(_,_.exports);var y,b,w,E,O,x,I,L,R,N,A=_.exports,S=Object.freeze({loose:!0}),k=Object.freeze({}),T=function(e){return e?"object"!==d(e)?S:e:k},j=/^[0-9]+$/,M=function(e,t){var n=j.test(e),r=j.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},P={compareIdentifiers:M,rcompareIdentifiers:function(e,t){return M(t,e)}},z=g,U=v.MAX_LENGTH,D=v.MAX_SAFE_INTEGER,C=A.safeRe,G=A.t,F=T,V=P.compareIdentifiers,B=function(){function e(t,r){if(n(this,e),r=F(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError('Invalid version. Must be a string. Got type "'.concat(d(t),'".'));if(t.length>U)throw new TypeError("version is longer than ".concat(U," characters"));z("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;var o=t.trim().match(r.loose?C[G.LOOSE]:C[G.FULL]);if(!o)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>D||this.major<0)throw new TypeError("Invalid major version");if(this.minor>D||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>D||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<D)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}return o(e,[{key:"format",value:function(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}},{key:"toString",value:function(){return this.version}},{key:"compare",value:function(t){if(z("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}},{key:"compareMain",value:function(t){return t instanceof e||(t=new e(t,this.options)),V(this.major,t.major)||V(this.minor,t.minor)||V(this.patch,t.patch)}},{key:"comparePre",value:function(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],o=t.prerelease[n];if(z("prerelease compare",n,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return V(r,o)}while(++n)}},{key:"compareBuild",value:function(t){t instanceof e||(t=new e(t,this.options));var n=0;do{var r=this.build[n],o=t.build[n];if(z("prerelease compare",n,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return V(r,o)}while(++n)}},{key:"inc",value:function(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":var r=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[r];else{for(var o=this.prerelease.length;--o>=0;)"number"==typeof this.prerelease[o]&&(this.prerelease[o]++,o=-2);if(-1===o){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(t){var i=[t,r];!1===n&&(i=[t]),0===V(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break;default:throw new Error("invalid increment argument: ".concat(e))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}}])}(),X=B,q=X,$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e instanceof q)return e;try{return new q(e,t)}catch(e){if(!n)return null;throw e}},H=$,Y=function(e,t){var n=H(e,t);return n?n.version:null},W=$,J=function(e,t){var n=W(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},Z=X,K=function(e,t,n,r,o){"string"==typeof n&&(o=r,r=n,n=void 0);try{return new Z(e instanceof Z?e.version:e,n).inc(t,r,o).version}catch(e){return null}},Q=$,ee=function(e,t){var n=Q(e,null,!0),r=Q(t,null,!0),o=n.compare(r);if(0===o)return null;var i=o>0,a=i?n:r,l=i?r:n,c=!!a.prerelease.length;if(!!l.prerelease.length&&!c)return l.patch||l.minor?a.patch?"patch":a.minor?"minor":"major":"major";var s=c?"pre":"";return n.major!==r.major?s+"major":n.minor!==r.minor?s+"minor":n.patch!==r.patch?s+"patch":"prerelease"},te=X,ne=function(e,t){return new te(e,t).major},re=X,oe=function(e,t){return new re(e,t).minor},ie=X,ae=function(e,t){return new ie(e,t).patch},le=$,ce=function(e,t){var n=le(e,t);return n&&n.prerelease.length?n.prerelease:null},se=X,ue=function(e,t,n){return new se(e,n).compare(new se(t,n))},pe=ue,fe=function(e,t,n){return pe(t,e,n)},de=ue,he=function(e,t){return de(e,t,!0)},_e=X,ve=function(e,t,n){var r=new _e(e,n),o=new _e(t,n);return r.compare(o)||r.compareBuild(o)},me=ve,ge=function(e,t){return e.sort((function(e,n){return me(e,n,t)}))},ye=ve,be=function(e,t){return e.sort((function(e,n){return ye(n,e,t)}))},we=ue,Ee=function(e,t,n){return we(e,t,n)>0},Oe=ue,xe=function(e,t,n){return Oe(e,t,n)<0},Ie=ue,Le=function(e,t,n){return 0===Ie(e,t,n)},Re=ue,Ne=function(e,t,n){return 0!==Re(e,t,n)},Ae=ue,Se=function(e,t,n){return Ae(e,t,n)>=0},ke=ue,Te=function(e,t,n){return ke(e,t,n)<=0},je=Le,Me=Ne,Pe=Ee,ze=Se,Ue=xe,De=Te,Ce=function(e,t,n,r){switch(t){case"===":return"object"===d(e)&&(e=e.version),"object"===d(n)&&(n=n.version),e===n;case"!==":return"object"===d(e)&&(e=e.version),"object"===d(n)&&(n=n.version),e!==n;case"":case"=":case"==":return je(e,n,r);case"!=":return Me(e,n,r);case">":return Pe(e,n,r);case">=":return ze(e,n,r);case"<":return Ue(e,n,r);case"<=":return De(e,n,r);default:throw new TypeError("Invalid operator: ".concat(t))}},Ge=X,Fe=$,Ve=A.safeRe,Be=A.t,Xe=function(e,t){if(e instanceof Ge)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;var n=null;if((t=t||{}).rtl){for(var r,o=t.includePrerelease?Ve[Be.COERCERTLFULL]:Ve[Be.COERCERTL];(r=o.exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),o.lastIndex=r.index+r[1].length+r[2].length;o.lastIndex=-1}else n=e.match(t.includePrerelease?Ve[Be.COERCEFULL]:Ve[Be.COERCE]);if(null===n)return null;var i=n[2],a=n[3]||"0",l=n[4]||"0",c=t.includePrerelease&&n[5]?"-".concat(n[5]):"",s=t.includePrerelease&&n[6]?"+".concat(n[6]):"";return Fe("".concat(i,".").concat(a,".").concat(l).concat(c).concat(s),t)};function qe(){if(E)return w;function e(t){var n=this;if(n instanceof e||(n=new e),n.tail=null,n.head=null,n.length=0,t&&"function"==typeof t.forEach)t.forEach((function(e){n.push(e)}));else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)n.push(arguments[r]);return n}function t(e,t,n){var r=t===e.head?new o(n,null,t,e):new o(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function n(e,t){e.tail=new o(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function r(e,t){e.head=new o(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function o(e,t,n,r){if(!(this instanceof o))return new o(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}E=1,w=e,e.Node=o,e.create=e,e.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},e.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},e.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},e.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)n(this,arguments[e]);return this.length},e.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)r(this,arguments[e]);return this.length},e.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},e.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},e.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},e.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},e.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},e.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},e.prototype.map=function(t,n){n=n||this;for(var r=new e,o=this.head;null!==o;)r.push(t.call(n,o.value,this)),o=o.next;return r},e.prototype.mapReverse=function(t,n){n=n||this;for(var r=new e,o=this.tail;null!==o;)r.push(t.call(n,o.value,this)),o=o.prev;return r},e.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var o=0;null!==r;o++)n=e(n,r.value,o),r=r.next;return n},e.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var o=this.length-1;null!==r;o--)n=e(n,r.value,o),r=r.prev;return n},e.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},e.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},e.prototype.slice=function(t,n){(n=n||this.length)<0&&(n+=this.length),(t=t||0)<0&&(t+=this.length);var r=new e;if(n<t||n<0)return r;t<0&&(t=0),n>this.length&&(n=this.length);for(var o=0,i=this.head;null!==i&&o<t;o++)i=i.next;for(;null!==i&&o<n;o++,i=i.next)r.push(i.value);return r},e.prototype.sliceReverse=function(t,n){(n=n||this.length)<0&&(n+=this.length),(t=t||0)<0&&(t+=this.length);var r=new e;if(n<t||n<0)return r;t<0&&(t=0),n>this.length&&(n=this.length);for(var o=this.length,i=this.tail;null!==i&&o>n;o--)i=i.prev;for(;null!==i&&o>t;o--,i=i.prev)r.push(i.value);return r},e.prototype.splice=function(e,n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,o=this.head;null!==o&&r<e;r++)o=o.next;var i=[];for(r=0;o&&r<n;r++)i.push(o.value),o=this.removeNode(o);null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(r=0;r<(arguments.length<=2?0:arguments.length-2);r++)o=t(this,o,r+2<2||arguments.length<=r+2?void 0:arguments[r+2]);return i},e.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{(b?y:(b=1,y=function(e){e.prototype[Symbol.iterator]=s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))}))(e)}catch(e){}return w}function $e(){if(L)return I;L=1;var e=function(){function e(t,r){var o=this;if(n(this,e),r=a(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof l)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((function(e){return o.parseRange(e.trim())})).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(this.raw));if(this.set.length>1){var c=this.set[0];if(this.set=this.set.filter((function(e){return!b(e[0])})),0===this.set.length)this.set=[c];else if(this.set.length>1){var s,u=i(this.set);try{for(u.s();!(s=u.n()).done;){var p=s.value;if(1===p.length&&w(p[0])){this.set=[p];break}}}catch(e){u.e(e)}finally{u.f()}}}this.format()}return o(e,[{key:"format",value:function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range}},{key:"toString",value:function(){return this.range}},{key:"parseRange",value:function(e){var t=this,n=((this.options.includePrerelease&&m)|(this.options.loose&&y))+":"+e,o=r.get(n);if(o)return o;var a=this.options.loose,s=a?u[f.HYPHENRANGELOOSE]:u[f.HYPHENRANGE];e=e.replace(s,C(this.options.includePrerelease)),c("hyphen replace",e),e=e.replace(u[f.COMPARATORTRIM],d),c("comparator trim",e),e=e.replace(u[f.TILDETRIM],h),c("tilde trim",e),e=e.replace(u[f.CARETTRIM],_),c("caret trim",e);var v=e.split(" ").map((function(e){return R(e,t.options)})).join(" ").split(/\s+/).map((function(e){return D(e,t.options)}));a&&(v=v.filter((function(e){return c("loose invalid filter",e,t.options),!!e.match(u[f.COMPARATORLOOSE])}))),c("range list",v);var g,w=new Map,E=v.map((function(e){return new l(e,t.options)})),O=i(E);try{for(O.s();!(g=O.n()).done;){var x=g.value;if(b(x))return[x];w.set(x.value,x)}}catch(e){O.e(e)}finally{O.f()}w.size>1&&w.has("")&&w.delete("");var I=p(w.values());return r.set(n,I),I}},{key:"intersects",value:function(t,n){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some((function(e){return E(e,n)&&t.set.some((function(t){return E(t,n)&&e.every((function(e){return t.every((function(t){return e.intersects(t,n)}))}))}))}))}},{key:"test",value:function(e){if(!e)return!1;if("string"==typeof e)try{e=new s(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(G(this.set[t],e,this.options))return!0;return!1}}])}();I=e;var t=function(){if(x)return O;x=1;var e=qe(),t=Symbol("max"),r=Symbol("length"),i=Symbol("lengthCalculator"),a=Symbol("allowStale"),l=Symbol("maxAge"),c=Symbol("dispose"),s=Symbol("noDisposeOnSet"),u=Symbol("lruList"),p=Symbol("cache"),f=Symbol("updateAgeOnGet"),d=function(){return 1},h=function(){return o((function e(r){if(n(this,e),"number"==typeof r&&(r={max:r}),r||(r={}),r.max&&("number"!=typeof r.max||r.max<0))throw new TypeError("max must be a non-negative number");this[t]=r.max||1/0;var o=r.length||d;if(this[i]="function"!=typeof o?d:o,this[a]=r.stale||!1,r.maxAge&&"number"!=typeof r.maxAge)throw new TypeError("maxAge must be a number");this[l]=r.maxAge||0,this[c]=r.dispose,this[s]=r.noDisposeOnSet||!1,this[f]=r.updateAgeOnGet||!1,this.reset()}),[{key:"max",get:function(){return this[t]},set:function(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[t]=e||1/0,m(this)}},{key:"allowStale",get:function(){return this[a]},set:function(e){this[a]=!!e}},{key:"maxAge",get:function(){return this[l]},set:function(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,m(this)}},{key:"lengthCalculator",get:function(){return this[i]},set:function(e){var t=this;"function"!=typeof e&&(e=d),e!==this[i]&&(this[i]=e,this[r]=0,this[u].forEach((function(e){e.length=t[i](e.value,e.key),t[r]+=e.length}))),m(this)}},{key:"length",get:function(){return this[r]}},{key:"itemCount",get:function(){return this[u].length}},{key:"rforEach",value:function(e,t){t=t||this;for(var n=this[u].tail;null!==n;){var r=n.prev;b(this,e,n,t),n=r}}},{key:"forEach",value:function(e,t){t=t||this;for(var n=this[u].head;null!==n;){var r=n.next;b(this,e,n,t),n=r}}},{key:"keys",value:function(){return this[u].toArray().map((function(e){return e.key}))}},{key:"values",value:function(){return this[u].toArray().map((function(e){return e.value}))}},{key:"reset",value:function(){var t=this;this[c]&&this[u]&&this[u].length&&this[u].forEach((function(e){return t[c](e.key,e.value)})),this[p]=new Map,this[u]=new e,this[r]=0}},{key:"dump",value:function(){var e=this;return this[u].map((function(t){return!v(e,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}})).toArray().filter((function(e){return e}))}},{key:"dumpLru",value:function(){return this[u]}},{key:"set",value:function(e,n,o){if((o=o||this[l])&&"number"!=typeof o)throw new TypeError("maxAge must be a number");var a=o?Date.now():0,f=this[i](n,e);if(this[p].has(e)){if(f>this[t])return g(this,this[p].get(e)),!1;var d=this[p].get(e).value;return this[c]&&(this[s]||this[c](e,d.value)),d.now=a,d.maxAge=o,d.value=n,this[r]+=f-d.length,d.length=f,this.get(e),m(this),!0}var h=new y(e,n,f,a,o);return h.length>this[t]?(this[c]&&this[c](e,n),!1):(this[r]+=h.length,this[u].unshift(h),this[p].set(e,this[u].head),m(this),!0)}},{key:"has",value:function(e){if(!this[p].has(e))return!1;var t=this[p].get(e).value;return!v(this,t)}},{key:"get",value:function(e){return _(this,e,!0)}},{key:"peek",value:function(e){return _(this,e,!1)}},{key:"pop",value:function(){var e=this[u].tail;return e?(g(this,e),e.value):null}},{key:"del",value:function(e){g(this,this[p].get(e))}},{key:"load",value:function(e){this.reset();for(var t=Date.now(),n=e.length-1;n>=0;n--){var r=e[n],o=r.e||0;if(0===o)this.set(r.k,r.v);else{var i=o-t;i>0&&this.set(r.k,r.v,i)}}}},{key:"prune",value:function(){var e=this;this[p].forEach((function(t,n){return _(e,n,!1)}))}}])}(),_=function(e,t,n){var r=e[p].get(t);if(r){var o=r.value;if(v(e,o)){if(g(e,r),!e[a])return}else n&&(e[f]&&(r.value.now=Date.now()),e[u].unshiftNode(r));return o.value}},v=function(e,t){if(!t||!t.maxAge&&!e[l])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[l]&&n>e[l]},m=function(e){if(e[r]>e[t])for(var n=e[u].tail;e[r]>e[t]&&null!==n;){var o=n.prev;g(e,n),n=o}},g=function(e,t){if(t){var n=t.value;e[c]&&e[c](n.key,n.value),e[r]-=n.length,e[p].delete(n.key),e[u].removeNode(t)}},y=o((function e(t,r,o,i,a){n(this,e),this.key=t,this.value=r,this.length=o,this.now=i,this.maxAge=a||0})),b=function(e,t,n,r){var o=n.value;v(e,o)&&(g(e,n),e[a]||(o=void 0)),o&&t.call(r,o.value,o.key,e)};return O=h}(),r=new t({max:1e3}),a=T,l=He(),c=g,s=X,u=A.safeRe,f=A.t,d=A.comparatorTrimReplace,h=A.tildeTrimReplace,_=A.caretTrimReplace,m=v.FLAG_INCLUDE_PRERELEASE,y=v.FLAG_LOOSE,b=function(e){return"<0.0.0-0"===e.value},w=function(e){return""===e.value},E=function(e,t){for(var n=!0,r=e.slice(),o=r.pop();n&&r.length;)n=r.every((function(e){return o.intersects(e,t)})),o=r.pop();return n},R=function(e,t){return c("comp",e,t),e=j(e,t),c("caret",e),e=S(e,t),c("tildes",e),e=P(e,t),c("xrange",e),e=U(e,t),c("stars",e),e},N=function(e){return!e||"x"===e.toLowerCase()||"*"===e},S=function(e,t){return e.trim().split(/\s+/).map((function(e){return k(e,t)})).join(" ")},k=function(e,t){var n=t.loose?u[f.TILDELOOSE]:u[f.TILDE];return e.replace(n,(function(t,n,r,o,i){var a;return c("tilde",e,t,n,r,o,i),N(n)?a="":N(r)?a=">=".concat(n,".0.0 <").concat(+n+1,".0.0-0"):N(o)?a=">=".concat(n,".").concat(r,".0 <").concat(n,".").concat(+r+1,".0-0"):i?(c("replaceTilde pr",i),a=">=".concat(n,".").concat(r,".").concat(o,"-").concat(i," <").concat(n,".").concat(+r+1,".0-0")):a=">=".concat(n,".").concat(r,".").concat(o," <").concat(n,".").concat(+r+1,".0-0"),c("tilde return",a),a}))},j=function(e,t){return e.trim().split(/\s+/).map((function(e){return M(e,t)})).join(" ")},M=function(e,t){c("caret",e,t);var n=t.loose?u[f.CARETLOOSE]:u[f.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,(function(t,n,o,i,a){var l;return c("caret",e,t,n,o,i,a),N(n)?l="":N(o)?l=">=".concat(n,".0.0").concat(r," <").concat(+n+1,".0.0-0"):N(i)?l="0"===n?">=".concat(n,".").concat(o,".0").concat(r," <").concat(n,".").concat(+o+1,".0-0"):">=".concat(n,".").concat(o,".0").concat(r," <").concat(+n+1,".0.0-0"):a?(c("replaceCaret pr",a),l="0"===n?"0"===o?">=".concat(n,".").concat(o,".").concat(i,"-").concat(a," <").concat(n,".").concat(o,".").concat(+i+1,"-0"):">=".concat(n,".").concat(o,".").concat(i,"-").concat(a," <").concat(n,".").concat(+o+1,".0-0"):">=".concat(n,".").concat(o,".").concat(i,"-").concat(a," <").concat(+n+1,".0.0-0")):(c("no pr"),l="0"===n?"0"===o?">=".concat(n,".").concat(o,".").concat(i).concat(r," <").concat(n,".").concat(o,".").concat(+i+1,"-0"):">=".concat(n,".").concat(o,".").concat(i).concat(r," <").concat(n,".").concat(+o+1,".0-0"):">=".concat(n,".").concat(o,".").concat(i," <").concat(+n+1,".0.0-0")),c("caret return",l),l}))},P=function(e,t){return c("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return z(e,t)})).join(" ")},z=function(e,t){e=e.trim();var n=t.loose?u[f.XRANGELOOSE]:u[f.XRANGE];return e.replace(n,(function(n,r,o,i,a,l){c("xRange",e,n,r,o,i,a,l);var s=N(o),u=s||N(i),p=u||N(a),f=p;return"="===r&&f&&(r=""),l=t.includePrerelease?"-0":"",s?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(u&&(i=0),a=0,">"===r?(r=">=",u?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===r&&(r="<",u?o=+o+1:i=+i+1),"<"===r&&(l="-0"),n="".concat(r+o,".").concat(i,".").concat(a).concat(l)):u?n=">=".concat(o,".0.0").concat(l," <").concat(+o+1,".0.0-0"):p&&(n=">=".concat(o,".").concat(i,".0").concat(l," <").concat(o,".").concat(+i+1,".0-0")),c("xRange return",n),n}))},U=function(e,t){return c("replaceStars",e,t),e.trim().replace(u[f.STAR],"")},D=function(e,t){return c("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?f.GTE0PRE:f.GTE0],"")},C=function(e){return function(t,n,r,o,i,a,l,c,s,u,p,f,d){return n=N(r)?"":N(o)?">=".concat(r,".0.0").concat(e?"-0":""):N(i)?">=".concat(r,".").concat(o,".0").concat(e?"-0":""):a?">=".concat(n):">=".concat(n).concat(e?"-0":""),c=N(s)?"":N(u)?"<".concat(+s+1,".0.0-0"):N(p)?"<".concat(s,".").concat(+u+1,".0-0"):f?"<=".concat(s,".").concat(u,".").concat(p,"-").concat(f):e?"<".concat(s,".").concat(u,".").concat(+p+1,"-0"):"<=".concat(c),"".concat(n," ").concat(c).trim()}},G=function(e,t,n){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(var o=0;o<e.length;o++)if(c(e[o].semver),e[o].semver!==l.ANY&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0};return I}function He(){if(N)return R;N=1;var e=Symbol("SemVer ANY"),t=function(){function t(o,i){if(n(this,t),i=r(i),o instanceof t){if(o.loose===!!i.loose)return o;o=o.value}o=o.trim().split(/\s+/).join(" "),c("comparator",o,i),this.options=i,this.loose=!!i.loose,this.parse(o),this.semver===e?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}return o(t,[{key:"parse",value:function(t){var n=this.options.loose?i[a.COMPARATORLOOSE]:i[a.COMPARATOR],r=t.match(n);if(!r)throw new TypeError("Invalid comparator: ".concat(t));this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new s(r[2],this.options.loose):this.semver=e}},{key:"toString",value:function(){return this.value}},{key:"test",value:function(t){if(c("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new s(t,this.options)}catch(e){return!1}return l(t,this.operator,this.semver,this.options)}},{key:"intersects",value:function(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new u(e.value,n).test(this.value):""===e.operator?""===e.value||new u(this.value,n).test(e.semver):(!(n=r(n)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}],[{key:"ANY",get:function(){return e}}])}();R=t;var r=T,i=A.safeRe,a=A.t,l=Ce,c=g,s=X,u=$e();return R}var Ye=$e(),We=function(e,t,n){try{t=new Ye(t,n)}catch(e){return!1}return t.test(e)},Je=$e(),Ze=function(e,t){return new Je(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},Ke=X,Qe=$e(),et=function(e,t,n){var r=null,o=null,i=null;try{i=new Qe(t,n)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(r&&-1!==o.compare(e)||(o=new Ke(r=e,n)))})),r},tt=X,nt=$e(),rt=function(e,t,n){var r=null,o=null,i=null;try{i=new nt(t,n)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(r&&1!==o.compare(e)||(o=new tt(r=e,n)))})),r},ot=X,it=$e(),at=Ee,lt=function(e,t){e=new it(e,t);var n=new ot("0.0.0");if(e.test(n))return n;if(n=new ot("0.0.0-0"),e.test(n))return n;n=null;for(var r=function(){var t=e.set[o],r=null;t.forEach((function(e){var t=new ot(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!at(t,r)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: ".concat(e.operator))}})),!r||n&&!at(n,r)||(n=r)},o=0;o<e.set.length;++o)r();return n&&e.test(n)?n:null},ct=$e(),st=function(e,t){try{return new ct(e,t).range||"*"}catch(e){return null}},ut=X,pt=He(),ft=pt.ANY,dt=$e(),ht=We,_t=Ee,vt=xe,mt=Te,gt=Se,yt=function(e,t,n,r){var o,i,a,l,c;switch(e=new ut(e,r),t=new dt(t,r),n){case">":o=_t,i=mt,a=vt,l=">",c=">=";break;case"<":o=vt,i=gt,a=_t,l="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ht(e,t,r))return!1;for(var s,u=function(){var n=t.set[p],s=null,u=null;return n.forEach((function(e){e.semver===ft&&(e=new pt(">=0.0.0")),s=s||e,u=u||e,o(e.semver,s.semver,r)?s=e:a(e.semver,u.semver,r)&&(u=e)})),s.operator===l||s.operator===c?{v:!1}:u.operator&&u.operator!==l||!i(e,u.semver)?u.operator===c&&a(e,u.semver)?{v:!1}:void 0:{v:!1}},p=0;p<t.set.length;++p)if(s=u())return s.v;return!0},bt=yt,wt=function(e,t,n){return bt(e,t,">",n)},Et=yt,Ot=function(e,t,n){return Et(e,t,"<",n)},xt=$e(),It=function(e,t,n){return e=new xt(e,n),t=new xt(t,n),e.intersects(t,n)},Lt=We,Rt=ue,Nt=$e(),At=He(),St=At.ANY,kt=We,Tt=ue,jt=[new At(">=0.0.0-0")],Mt=[new At(">=0.0.0")],Pt=function(e,t,n){if(e===t)return!0;if(1===e.length&&e[0].semver===St){if(1===t.length&&t[0].semver===St)return!0;e=n.includePrerelease?jt:Mt}if(1===t.length&&t[0].semver===St){if(n.includePrerelease)return!0;t=Mt}var r,o,a,l,c=new Set,s=i(e);try{for(s.s();!(a=s.n()).done;){var u=a.value;">"===u.operator||">="===u.operator?r=zt(r,u,n):"<"===u.operator||"<="===u.operator?o=Ut(o,u,n):c.add(u.semver)}}catch(e){s.e(e)}finally{s.f()}if(c.size>1)return null;if(r&&o){if((l=Tt(r.semver,o.semver,n))>0)return null;if(0===l&&(">="!==r.operator||"<="!==o.operator))return null}var p,f,d,h,_,v=i(c);try{for(v.s();!(p=v.n()).done;){var m=p.value;if(r&&!kt(m,String(r),n))return null;if(o&&!kt(m,String(o),n))return null;var g,y=i(t);try{for(y.s();!(g=y.n()).done;){var b=g.value;if(!kt(m,String(b),n))return!1}}catch(e){y.e(e)}finally{y.f()}return!0}}catch(e){v.e(e)}finally{v.f()}var w=!(!o||n.includePrerelease||!o.semver.prerelease.length)&&o.semver,E=!(!r||n.includePrerelease||!r.semver.prerelease.length)&&r.semver;w&&1===w.prerelease.length&&"<"===o.operator&&0===w.prerelease[0]&&(w=!1);var O,x=i(t);try{for(x.s();!(O=x.n()).done;){var I=O.value;if(_=_||">"===I.operator||">="===I.operator,h=h||"<"===I.operator||"<="===I.operator,r)if(E&&I.semver.prerelease&&I.semver.prerelease.length&&I.semver.major===E.major&&I.semver.minor===E.minor&&I.semver.patch===E.patch&&(E=!1),">"===I.operator||">="===I.operator){if((f=zt(r,I,n))===I&&f!==r)return!1}else if(">="===r.operator&&!kt(r.semver,String(I),n))return!1;if(o)if(w&&I.semver.prerelease&&I.semver.prerelease.length&&I.semver.major===w.major&&I.semver.minor===w.minor&&I.semver.patch===w.patch&&(w=!1),"<"===I.operator||"<="===I.operator){if((d=Ut(o,I,n))===I&&d!==o)return!1}else if("<="===o.operator&&!kt(o.semver,String(I),n))return!1;if(!I.operator&&(o||r)&&0!==l)return!1}}catch(e){x.e(e)}finally{x.f()}return!(r&&h&&!o&&0!==l)&&(!(o&&_&&!r&&0!==l)&&(!E&&!w))},zt=function(e,t,n){if(!e)return t;var r=Tt(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},Ut=function(e,t,n){if(!e)return t;var r=Tt(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e},Dt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;e=new Nt(e,n),t=new Nt(t,n);var r,o=!1,a=i(e.set);try{e:for(a.s();!(r=a.n()).done;){var l,c=r.value,s=i(t.set);try{for(s.s();!(l=s.n()).done;){var u=l.value,p=Pt(c,u,n);if(o=o||null!==p,p)continue e}}catch(e){s.e(e)}finally{s.f()}if(o)return!1}}catch(e){a.e(e)}finally{a.f()}return!0},Ct=A,Gt=v,Ft=X,Vt=P,Bt=function(e,t,n){var r,o=[],a=null,l=null,c=e.sort((function(e,t){return Rt(e,t,n)})),s=i(c);try{for(s.s();!(r=s.n()).done;){var p=r.value;Lt(p,t,n)?(l=p,a||(a=p)):(l&&o.push([a,l]),l=null,a=null)}}catch(e){s.e(e)}finally{s.f()}a&&o.push([a,null]);for(var f=[],d=0,h=o;d<h.length;d++){var _=u(h[d],2),v=_[0],m=_[1];v===m?f.push(v):m||v!==c[0]?m?v===c[0]?f.push("<=".concat(m)):f.push("".concat(v," - ").concat(m)):f.push(">=".concat(v)):f.push("*")}var g=f.join(" || "),y="string"==typeof t.raw?t.raw:String(t);return g.length<y.length?g:t},Xt={parse:$,valid:Y,clean:J,inc:K,diff:ee,major:ne,minor:oe,patch:ae,prerelease:ce,compare:ue,rcompare:fe,compareLoose:he,compareBuild:ve,sort:ge,rsort:be,gt:Ee,lt:xe,eq:Le,neq:Ne,gte:Se,lte:Te,cmp:Ce,coerce:Xe,Comparator:He(),Range:$e(),satisfies:We,toComparators:Ze,maxSatisfying:et,minSatisfying:rt,minVersion:lt,validRange:st,outside:yt,gtr:wt,ltr:Ot,intersects:It,simplifyRange:Bt,subset:Dt,SemVer:Ft,re:Ct.re,src:Ct.src,tokens:Ct.t,SEMVER_SPEC_VERSION:Gt.SEMVER_SPEC_VERSION,RELEASE_TYPES:Gt.RELEASE_TYPES,compareIdentifiers:Vt.compareIdentifiers,rcompareIdentifiers:Vt.rcompareIdentifiers},qt=function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var o=u(r[n],2),i=o[0],a=o[1];if(Xt.satisfies(t,i))return a}return null},$t=function(e){var t=e.match(/_(\d+)_(\d+)\.(png|jpg|gif|jpeg)/);return{width:t?t[1]:null,height:t?t[2]:null}},Ht=function(e){var t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+),\s*([01]?\.?\d*)\)/);return{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10),a:parseFloat(t[4])}},Yt=function(e){return"string"!=typeof e?"":e.endsWith("/")?e:e+"/"},Wt=[{mode:"not-lod",set:"2048"},{mode:"lod",set:"1024-512"},{mode:"lod",set:"2048-1024"},{mode:"lod",set:"2048-512"},{mode:"lod",set:"4096-512"}],Jt=function(e){var t=e.scene,n=e.work,r=e.rawSettings,o=e.editLocations,i=e.floorplanRotateAngle,a=e.modelBaseUrl,l=e.infoBaseUrl,s=e.templateBaseUrl,u=e.pictureBaseUrl,p=i||0,f=r?{basic:r.basic,building:r.building,locations:{orientations:r.locations.orientations,points:r.locations.points.map((function(e,n){var r=t.waypoints.points[n];return c(c({},e),{},{enable:r.enable,visible:r.visible,img:r.img})})),version:r.locations.version}}:null;return{type:t.type,id:t.res_id,type_id:t.type_id,version:t.version,entry_info:t.entry_info,camera_fov:n.scenes.public.camera_fov,panorama_camera_fov:n.scenes.public.camera_fov,point_img:t.point_img,tile_render_config:Object.assign({zoom_render_2k_trigger:1.2,zoom_render_4k_trigger:2},Wt[parseInt(t.load_resolution)-1]),settings:f,pano_addr_list:t.pano_addr_list,pano_addr_path:t.pano_addr_path,pano_pic_src:t.pano_pic.src,floorplanRotateAngle:-p||0,load_resolution:t.load_resolution,lod_type:null==o?void 0:o.lod_type,scene_type:(null==o?void 0:o.scene_type)||t.type_id||3,file_store_backend:null==o?void 0:o.file_store_backend,waypoints_cube_path_list:null==o?void 0:o.locations,modelBaseUrl:Yt(a),infoBaseUrl:Yt(l),templateBaseUrl:Yt(s),pictureBaseUrl:Yt(u)}},Zt=[{mode:"not-lod",set:"2048"},{mode:"lod",set:"1024-512"},{mode:"lod",set:"2048-1024"},{mode:"lod",set:"2048-512"},{mode:"lod",set:"4096-512"}],Kt=["model","virtual","purepano","purepano"],Qt=["dollhouse","dollhouse.flyto.panorama","panorama","fisheye","fadein"],en=function(e){var t=e.work,n=e.scene,r=e.rawSettings,o=e.waypointConfig,i=e.editLocations,a=e.floorplanRotateAngle,l=e.modelBaseUrl,s=e.infoBaseUrl,u=e.templateUrl,p=e.pictureBaseUrl,f=a||0,d={rotation:n.camera_rotation,mode:Qt[n.fadein_style-1],point:n.fadein_view_location_id,entry_magnification:1},h=Kt[n.type-1],_=r?{basic:r.basic,building:r.building,locations:{orientations:r.locations.orientations,points:r.locations.points.map((function(e,t){var n=o.list[t];return c(c({},e),{},{enable:n.enable,visible:n.visible,img:n.url})})),version:r.locations.version}}:r;return{type:h,id:n.model_id,type_id:n.type,version:n.model_version,entry_info:d,camera_fov:t.fov,panorama_camera_fov:t.fov,point_img:n.location_icon,tile_render_config:Object.assign({zoom_render_2k_trigger:1.2,zoom_render_4k_trigger:2},Zt[parseInt(n.load_resolution)-1]),settings:_,pano_addr_list:n.pano_addr_list,pano_addr_path:n.pano_addr_path,floorplanRotateAngle:-f||0,load_resolution:n.load_resolution,lod_type:null==i?void 0:i.lod_type,scene_type:null==i?void 0:i.scene_type,file_store_backend:null==i?void 0:i.file_store_backend,waypoints_cube_path_list:null==i?void 0:i.locations,modelBaseUrl:Yt(l),infoBaseUrl:Yt(s),templateUrl:Yt(u),pictureBaseUrl:Yt(p)}};function tn(e,t){return"[object String]"===Object.prototype.toString.call(e)||(t&&console.error("".concat(t," is not string")),!1)}function nn(e,t){return"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)||(t&&console.error("".concat(t," is not number")),!1)}function rn(e,t){return"[object Object]"===Object.prototype.toString.call(e)||(t&&console.error("".concat(t," is not object")),!1)}var on=function(e){var t=e.source,n=void 0===t?"package":t,r=e.rawSettings,o=e.modelId,i=e.modelVersion,a=e.pointImage,l=e.entryInfo,s=void 0===l?{}:l,u=e.cameraFov,p=void 0===u?70:u,f=e.modelBaseUrl,d=e.infoBaseUrl,h=e.templateBaseUrl,_=e.pictureBaseUrl;r||console.error("Invalid rawSettings!"),tn(o)||console.error("Invalid modelId!"),tn(i)||console.error("Invalid modelVersion!");var v={basic:r.basic,building:r.building,locations:{orientations:r.locations.orientations,points:r.locations.points.map((function(e,t){return c(c({},e),{},{enable:!0,visible:!0,img:""})})),version:r.locations.version}};return{type:"model",id:o,version:"package"===n?"model/".concat(i):i,entry_info:c({mode:"panorama",point:v.locations.points[0].locationid,rotation:{x:0,y:0,z:0,w:0}},s),camera_fov:p,panorama_camera_fov:p,point_img:"default"===a?"":a,no_default_point_img:"default"!==a,tile_render_config:{zoom_render_2k_trigger:1.2,zoom_render_4k_trigger:2,mode:"lod",set:"2048-512"},settings:v,pano_addr_list:[],pano_addr_path:"",pano_pic_src:"",floorplanRotateAngle:0,load_resolution:2,lod_type:null,scene_type:3,file_store_backend:null,waypoints_cube_path_list:[],modelBaseUrl:Yt(f),infoBaseUrl:Yt(d),templateBaseUrl:Yt(h),pictureBaseUrl:Yt(_)}},an=["fadein","fisheye"],ln=Object.create(null);function cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};(function(e){var t="purepano data adapter failure";if(!e.id)return console.error("".concat(t,", reason: invalid id")),!1;if(!e.type)return console.error("".concat(t,", reason: invalid type")),!1;if(!rn(e.pano_pic,"".concat(t," pano_pic")))return!1;if(!rn(e.entry_info,"".concat(t," entry_info")))return!1;if(!e.pano_support)return console.error("".concat(t," reason: invalid pano_support")),!1;if(!function(e,t){return!(!rn(e,t)||!(nn(e.x,"x")&&nn(e.y,"y")&&nn(e.z,"z")&&nn(e.w,"w")&&4===Object.keys(e).length)&&(t&&console.error("".concat(t," is not vec4")),1))}(e.entry_info.rotation,"".concat(t," entry_info.rotation")))return!1;"single"===e.pano_support?e.pano_pic.src||console.error("".concat(t," reason: invalid pano_pic.src")):"6cube"===e.pano_support?function(e,t){return"[object Array]"===Object.prototype.toString.call(e)||(t&&console.error("".concat(t," is not array")),!1)}(e.pano_pic.imgs,"pano_pic.imgs")&&6===e.pano_pic.imgs.length||console.error("".concat(t," reason: invalid pano_pic.imgs")):console.error("".concat(t," reason: invalid pano_support"));e.tile_render_config||console.error("".concat(t,", reason: invalid tile_render_config"));return!0})(e)&&(!function(e){var t=Object.create(null);t.pano_id=e.id,t.name=e.name,t.support=e.pano_support,"single"===t.support&&(t.src=e.pano_pic.src);"6cube"===t.support&&(t.cubes=e.pano_pic.imgs);t.render_mode=e.tile_render_config.mode,t.render_set=e.tile_render_config.set,t.camera_fov=70;var n=e.camera_fov;0!==n&&nn(n,"camera_fov")&&(t.camera_fov=n);if(t.panorama_camera_fov=n,"v2"===e.outputVersion){var r=e.type_id,o=e.lod_type,i=e.scene_type,a=e.file_store_backend,l=e.waypoints_cube_path_list,c=i||r||3;t.tile_base_path=2===o?l[0].path:e.pano_addr_path,t.auto_crop_tile=2===o,t.auto_crop_server=a||"oss",t.tile_name=4===c&&l?l[0].locationid:"pano"}ln.basic=t,ln.zoom=Object.create(null),ln.zoom.tile_2k_trigger=e.tile_render_config.zoom_render_2k_trigger||1,ln.zoom.tile_4k_trigger=e.tile_render_config.zoom_render_4k_trigger||2}(e),function(e){var t="purepano data adapter entry info failure",n=Object.create(null);n.rotation={x:e.rotation.x,y:e.rotation.y,z:e.rotation.z,w:e.rotation.w},-1===an.indexOf(e.anima)&&console.error("".concat(t,", reason: invalid entry_info.anima!"));n.anima=e.anima,ln.entry_info=n}(e.entry_info),t(ln))}ln.type="purepano";var sn="//opendev.3dnest.cn",un=sn+"/api/v2/op/token/takelook/",pn=sn+"/api/v1/op/sdk_auth/internaln/auth/",fn=sn+"/api/v2/op/sdk_auth/spancsdk/auth/",dn=sn+"/api/v1/op/sdk_auth/sdk_domain/auth?service_code=1",hn={basic_url:{_oss:{model_base_url:"//modelcdn2.3dnest.cn/",info_base_url:"//infocdn2.3dnest.cn/",template_url:"//template2.3dnest.cn/",picture_url:"//material.3dnest.cn/e100_sdk/"}}},_n="oss",vn=hn.basic_url["_".concat(_n)].model_base_url,mn=hn.basic_url["_".concat(_n)].info_base_url,gn=hn.basic_url["_".concat(_n)].template_url,yn=hn.basic_url["_".concat(_n)].picture_url,bn="",wn="",En=null,On=Object.create(null);function xn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.id)return console.error("".concat("create urls failure",", reason: unget modelId")),void n();bn=e.id;var t=e.complete||function(){},n=e.failure||function(){};wn=e.setting_type,t()}function In(e){En=e.settingsVersion,e.settingsTime;var t={v1:{settingsUrl:"".concat(mn).concat(bn,"/").concat(En,"/").concat(wn,".txt"),nestUrl:"".concat(vn).concat(bn,"/").concat(En,"/model.nest"),textureUrl:"".concat(vn).concat(bn,"/").concat(En,"/"),tileUrl:"".concat(vn).concat(bn,"/").concat(En,"/"),infoBaseUrl:mn},v2:{settingsUrl:"".concat(mn).concat(bn,"/").concat(En,"/").concat(wn,".txt"),nestUrl:"".concat(vn).concat(bn,"/").concat(En,"/model.nest"),textureUrl:"".concat(vn).concat(bn,"/").concat(En,"/texture_high/"),tileUrl:"".concat(vn).concat(bn,"/").concat(En,"/"),infoBaseUrl:mn}};On.settingsUrl=t[e.urlVersion].settingsUrl,On.nestUrl=t[e.urlVersion].nestUrl,On.textureUrl=t[e.urlVersion].textureUrl,On.tileUrl=t[e.urlVersion].tileUrl,On.infoBaseUrl=t[e.urlVersion].infoBaseUrl}function Ln(){return On.versionUrl}function Rn(){return On.settingsUrl}function Nn(){return On.nestUrl}function An(){return On.textureUrl}function Sn(){return On.tileUrl}function kn(e){return{x:e.x,y:e.z,z:-e.y}}Object.defineProperties(On,{createUrl:{get:function(){return xn}},convertVersion:{get:function(){return In}},getVersionUrl:{get:function(){return Ln}},getSettingsUrl:{get:function(){return Rn}},getNestUrl:{get:function(){return Nn}},getTextureUrl:{get:function(){return An}},getTileUrl:{get:function(){return Sn}},getTemplateBaseUrl:{get:function(){return gn}},getPictureBaseUrl:{get:function(){return yn}},setCDNUrl:{get:function(){return function(e){e&&(e.model_base_url&&(vn=e.model_base_url),e.info_base_url&&(mn=e.info_base_url),e.template_base_url&&(gn=e.template_url),e.picture_base_url&&(yn=e.picture_base_url))}}},getAuthorizationTokenUrl:{get:function(){return un}},getSignatureCheckUrl:{get:function(){return pn}},getOpenAuthorizationUrl:{get:function(){return fn}},getPrivateAuthorizationUrl:{get:function(){return dn}}});var Tn=function(e){var t,n,r,o,i,a,l=(t={x:0,y:1,z:0},n=90*Math.PI/180,r=n/2,o=Math.sin(r),{w:Math.cos(r),x:t.x*o,y:t.y*o,z:t.z*o}),c={x:e.x,y:e.z,z:-e.y,w:e.w};return{w:(i=c).w*(a=l).w-i.x*a.x-i.y*a.y-i.z*a.z,x:i.w*a.x+i.x*a.w+i.y*a.z-i.z*a.y,y:i.w*a.y-i.x*a.z+i.y*a.w+i.z*a.x,z:i.w*a.z+i.x*a.y-i.y*a.x+i.z*a.w}},jn=["panorama","dollhouse","floorplan","dollhouse.flyto.panorama"],Mn=Object.create(null);function Pn(e){}function zn(e,t){if(e.basic)if(e.building)if(e.locations)if(e.locations.points){var n=e.basic,r=e.building,o=e.locations.points;n.model.modelid,n.version,function(e,t){console.info("> adapter model basic data");var n=Object.create(null);n.version=e.version,n.model_id=e.model.modelid,n.model_nest_url=On.getNestUrl(),n.model_texture_url=On.getTextureUrl(),n.pano_tile_url=On.getTileUrl(),e.lod||(e.lod=["1024-512","2048-512"]);e.not_lod||(e.not_lod=["512","1024"]);n.lod_support=[],n.cube_support=[],n.lod_support.push("1024-512"),n.lod_support.push("2048-512"),n.cube_support.push("512"),n.cube_support.push("1024"),-1!==e.lod.indexOf("4096-512")&&n.lod_support.push("4096-512");-1!==e.lod.indexOf("2048-1024")&&n.lod_support.push("2048-1024");-1!==e.not_lod.indexOf(2048)&&n.cube_support.push("2048");n.straight_pano=!1,e.menu?void 0!==e.menu.straight_enable&&(n.straight_pano=e.menu.straight_enable):console.error("invalid basic.menu!");n.camera_fov=70;var r=t.camera_fov;r&&nn(r,"camera_fov")&&(n.camera_fov=r);if(n.panorama_camera_fov=r,"v2"===t.outputVersion){var o,i=t.load_resolution,a=t.lod_type,l=t.file_store_backend;n.model_texture_quality=void 0===i||2===i?1024:2048,n.auto_crop_tile=2===a,n.auto_crop_server=l||"oss",n.panorama_camera_zoom=Number((null===(o=t.entry_info)||void 0===o?void 0:o.entry_magnification)||1),n.dollhouse_camera_zoom=1,n.dollhouse_distance_zoom=1}Mn.basic=n}(n,t),function(e){console.info("> adapter model building data");var t=Object.create(null),n=function(e){console.info("> adapter model blocks data");var t=[];return e.forEach((function(e){var n=Object.create(null);n.flooridx=e.flooridx,n.blockidx=e.blockidx,n.type=e.category,t.push(n)})),t}(e.blocks);t.blocks=n;var r=function(e){console.info("> adapter model floors data");var t=[];e.forEach((function(e){var n=Object.create(null);n.idx=e.flooridx,t.push(n)})),t.length||t.push({idx:0});return t}(e.floors);t.floors=r,Mn.building=t}(r),function(e,t){console.info("> adapter model waypoints data");var n=[];Mn.alonePanoramaPoints=0;for(var r=0,o=e.length;r<o;++r){var i=e[r];if(!1===i.enable&&console.warn("模型数据，存在禁用的点位",i.locationid),2!==i.type)if(1===i.type){var a=Object.create(null),l=t.no_default_point_img?"":"".concat(On.getPictureBaseUrl,"pointermain_512x512.png");a.type=i.type,a.enable=i.enable,a.visible=void 0===i.visible||i.visible,a.flooridx=i.flooridx,a.location_id=i.locationid,a.rotation=Tn(i.rotation),a.viewpoint=kn(i.viewpoint),a.spot=kn(i.spot),a.neighbour=i.neighbour||i.vps,a.neighbour_visible=i.neighbour_visible||[],a.pic=i.img||t.point_img||l,a.scale=1,n.push(a)}else console.error("模型数据，存在未知类型点位",i.locationid);else Mn.alonePanoramaPoints++,console.warn("模型数据，存在独立全景点",i.locationid)}Mn.waypoints=n}(o,t),function(e){var t=e.waypoints_cube_path_list;if(!t)return;var n={};t.forEach((function(e){n[e.locationid]=e.path})),Mn.waypoints_cube_path=n}(t),function(e){console.info("> adapter model entry info");var t="model data adapter entry info failure";-1===jn.indexOf(e.entry_info.mode)&&console.error("".concat(t,", reason: invalid entry_info.mode!"));var n=e.entry_info,r=Object.create(null);r.mode=n.mode||"panorama",r.floorplan_rotate_angle=n.floorplan_rotate_angle||null,r.dollhouse_camera_position=n.entry_camera_position_3d&&0===Object.keys(n.entry_camera_position_3d).length?null:n.entry_camera_position_3d,r.dollhouse_camera_quaternion=n.entry_camera_quaternion_3d&&0===Object.keys(n.entry_camera_quaternion_3d).length?null:n.entry_camera_quaternion_3d,r.dollhouse_camera_target=n.entry_camera_target_3d&&0===Object.keys(n.entry_camera_target_3d).length?null:n.entry_camera_target_3d,Mn.entry_info=r}(e),function(e){console.info("> adapter model entry point");var t="model data adapter entry point failure";-1===jn.indexOf(e.entry_info.mode)&&console.error("".concat(t,", reason: invalid entry mode!"));var n=e.entry_info,r=Object.create(null),o=null;o=n.point?function(e){for(var t=0,n=Mn.waypoints.length;t<n;++t){var r=Mn.waypoints[t];if(r.location_id===e)return r}return null}(n.point):function(){for(var e=0,t=Mn.waypoints.length;e<t;++e){var n=Mn.waypoints[e];if(!0===n.enable)return n}return null}();o?!1===o.enable&&console.error("".concat(t,", reason: point disabled!")):console.error("".concat(t,", reason: invalid point"));if(r.location_id=o.location_id,n.rotation)r.rotation={x:n.rotation.x,y:n.rotation.y,z:n.rotation.z,w:n.rotation.w};else{var i=o.rotation,a={x:i.x,y:i.z,z:-i.y,w:i.w};r.rotation={x:a.x,y:a.y,z:a.z,w:a.w}}Mn.entry_point=r}(e),function(e){var t="adapter render config failure";if(!1===rn(e.tile_render_config,"tile_render_config"))return void console.error("".concat(t,", reason: invalid tile_render_config"));var n=e.tile_render_config.mode;"lod"!==n&&"not-lod"!==n&&(console.error("".concat(t,", reason: invalid tile_render_config.mode")),n="lod");var r=e.tile_render_config.set;"lod"===n&&-1===Mn.basic.lod_support.indexOf(r)&&(console.error("".concat(t,", reason: invalid tile_render_config.set")),r="2048-512");"not-lod"===n&&(-1===Mn.basic.cube_support.indexOf(r)?(console.error("".concat(t,", reason: invalid tile_render_config.set")),n="lod",r="2048-512"):n="6cube");Mn.basic.render_mode=n,Mn.basic.render_set=r,Mn.zoom=Object.create(null),Mn.zoom.tile_2k_trigger=e.tile_render_config.zoom_render_2k_trigger||1,Mn.zoom.tile_4k_trigger=e.tile_render_config.zoom_render_4k_trigger||2}(t)}else alert("模型缺少点位数据！");else alert("模型数据缺少locations字段！");else alert("模型数据缺少building字段！");else alert("模型数据缺少basic字段！")}Mn.type="model",Mn.alonePanoramaPoints=0,Object.defineProperties(Mn,{adapter:{get:function(){return zn}},copy:{get:function(){return Pn}}});var Un=["panorama","dollhouse","floorplan","dollhouse.flyto.panorama"],Dn=Object.create(null);function Cn(e){}function Gn(e,t){if(e.basic)if(e.building)if(e.locations)if(e.locations.points){var n=e.basic,r=e.building,o=e.locations.points;n.model.modelid,n.version,function(e,t){var n;console.info("> adapter model basic data");var r=Object.create(null);r.version=e.version,r.model_id=e.model.modelid,r.model_nest_url=On.getNestUrl(),r.model_texture_url=On.getTextureUrl(),r.pano_tile_url=On.getTileUrl(),e.lod||(e.lod=["1024-512","2048-512"]);e.not_lod||(e.not_lod=["512","1024"]);r.lod_support=[],r.cube_support=[],r.lod_support.push("1024-512"),r.lod_support.push("2048-512"),r.cube_support.push("512"),r.cube_support.push("1024"),-1!==e.lod.indexOf("4096-512")&&r.lod_support.push("4096-512");-1!==e.lod.indexOf("2048-1024")&&r.lod_support.push("2048-1024");-1!==e.not_lod.indexOf(2048)&&r.cube_support.push("2048");r.straight_pano=!1,e.menu?void 0!==e.menu.straight_enable&&(r.straight_pano=e.menu.straight_enable):console.error("invalid basic.menu!");r.camera_fov=70;var o=t.camera_fov;o&&nn(o,"camera_fov")&&(r.camera_fov=o);r.panorama_camera_fov=o;var i=t.load_resolution,a=t.lod_type,l=t.file_store_backend;r.model_texture_quality=void 0===i||2===i?1024:2048,r.auto_crop_tile=2===a,r.auto_crop_server=l||"oss",r.panorama_camera_zoom=Number((null===(n=t.entry_info)||void 0===n?void 0:n.entry_magnification)||1),r.dollhouse_camera_zoom=1,r.dollhouse_distance_zoom=1,Dn.basic=r}(n,t),function(e){console.info("> adapter model building data");var t=Object.create(null),n=function(e){console.info("> adapter model blocks data");var t=[];return e.forEach((function(e){var n=Object.create(null);n.flooridx=e.flooridx,n.blockidx=e.blockidx,n.type=e.category,t.push(n)})),t}(e.blocks);t.blocks=n;var r=function(e){console.info("> adapter model floors data");var t=[];e.forEach((function(e){var n=Object.create(null);n.idx=e.flooridx,t.push(n)})),t.length||t.push({idx:0});return t}(e.floors);t.floors=r,Dn.building=t}(r),function(e,t){console.info("> adapter model waypoints data");var n=[];Dn.alonePanoramaPoints=0;for(var r=0,o=e.length;r<o;++r){var i=e[r];if(!1===i.enable&&console.warn("模型数据，存在禁用的点位",i.locationid),2!==i.type)if(1===i.type){var a=Object.create(null),l=t.no_default_point_img?"":"".concat(On.getPictureBaseUrl,"pointermain_512x512.png");a.type=i.type,a.enable=i.enable,a.visible=void 0===i.visible||i.visible,a.flooridx=i.flooridx,a.location_id=i.locationid,a.rotation=Tn(i.rotation),a.viewpoint=kn(i.viewpoint),a.spot=kn(i.spot),a.neighbour=i.neighbour||i.vps,a.neighbour_visible=i.neighbour_visible||[],a.pic=i.img||t.point_img||l,a.scale=1,n.push(a)}else console.error("模型数据，存在未知类型点位",i.locationid);else Dn.alonePanoramaPoints++,console.warn("模型数据，存在独立全景点",i.locationid)}Dn.waypoints=n}(o,t),function(e){var t=e.waypoints_cube_path_list;if(!t)return;var n={};t.forEach((function(e){n[e.locationid]=e.path})),Dn.waypoints_cube_path=n}(t),function(e){console.info("> adapter model entry info");var t="model data adapter entry info failure";-1===Un.indexOf(e.entry_info.mode)&&console.error("".concat(t,", reason: invalid entry_info.mode!"));var n=e.entry_info,r=Object.create(null);r.mode=n.mode||"panorama",r.floorplan_rotate_angle=n.floorplan_rotate_angle||null,r.dollhouse_camera_position=n.entry_camera_position_3d&&0===Object.keys(n.entry_camera_position_3d).length?null:n.entry_camera_position_3d,r.dollhouse_camera_quaternion=n.entry_camera_quaternion_3d&&0===Object.keys(n.entry_camera_quaternion_3d).length?null:n.entry_camera_quaternion_3d,r.dollhouse_camera_target=n.entry_camera_target_3d&&0===Object.keys(n.entry_camera_target_3d).length?null:n.entry_camera_target_3d,Dn.entry_info=r}(e),function(e){console.info("> adapter model entry point");var t="model data adapter entry point failure";-1===Un.indexOf(e.entry_info.mode)&&console.error("".concat(t,", reason: invalid entry mode!"));var n=e.entry_info,r=Object.create(null),o=null;o=n.point?function(e){for(var t=0,n=Dn.waypoints.length;t<n;++t){var r=Dn.waypoints[t];if(r.location_id===e)return r}return null}(n.point):function(){for(var e=0,t=Dn.waypoints.length;e<t;++e){var n=Dn.waypoints[e];if(!0===n.enable)return n}return null}();o?!1===o.enable&&console.error("".concat(t,", reason: point disabled!")):console.error("".concat(t,", reason: invalid point"));if(r.location_id=o.location_id,n.rotation)r.rotation={x:n.rotation.x,y:n.rotation.y,z:n.rotation.z,w:n.rotation.w};else{var i=o.rotation,a={x:i.x,y:i.z,z:-i.y,w:i.w};r.rotation={x:a.x,y:a.y,z:a.z,w:a.w}}Dn.entry_point=r}(e),function(e){var t="adapter render config failure";if(!1===rn(e.tile_render_config,"tile_render_config"))return void console.error("".concat(t,", reason: invalid tile_render_config"));var n=e.tile_render_config.mode;"lod"!==n&&"not-lod"!==n&&(console.error("".concat(t,", reason: invalid tile_render_config.mode")),n="lod");var r=e.tile_render_config.set;"lod"===n&&-1===Dn.basic.lod_support.indexOf(r)&&(console.error("".concat(t,", reason: invalid tile_render_config.set")),r="2048-512");"not-lod"===n&&(-1===Dn.basic.cube_support.indexOf(r)?(console.error("".concat(t,", reason: invalid tile_render_config.set")),n="lod",r="2048-512"):n="6cube");Dn.basic.render_mode=n,Dn.basic.render_set=r,Dn.zoom=Object.create(null),Dn.zoom.tile_2k_trigger=e.tile_render_config.zoom_render_2k_trigger||1,Dn.zoom.tile_4k_trigger=e.tile_render_config.zoom_render_4k_trigger||2}(t)}else alert("模型缺少点位数据！");else alert("模型数据缺少locations字段！");else alert("模型数据缺少building字段！");else alert("模型数据缺少basic字段！")}Dn.type="dsm",Dn.alonePanoramaPoints=0,Object.defineProperties(Dn,{adapter:{get:function(){return Gn}},copy:{get:function(){return Cn}}});var Fn=Object.create(null),Vn="adapter init failure!";Fn.init=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!1!==function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!e.id)return console.error("".concat(Vn,", reason: invalid id")),t(),!1;if(!e.type)return console.error("".concat(Vn,", reason: invalid type")),t(),!1}(e=JSON.parse(JSON.stringify(e)),(function(){n()}))){var r=e.id;switch(e.type){case"model":On.createUrl({id:r,setting_type:"raw_settings",complete:function(){var n=e.settings,r={urlVersion:e.outputVersion||"v1",settingsVersion:e.version,settingsTIme:Date.now()};n.entry_info=e.entry_info,On.setCDNUrl({model_base_url:e.modelBaseUrl,info_base_url:e.infoBaseUrl,template_base_url:e.templateBaseUrl,picture_base_url:e.pictureBaseUrl}),On.convertVersion(r),Mn.adapter(n,e),t(JSON.parse(JSON.stringify(Mn)))},failure:function(){n()}});break;case"virtual":On.createUrl({id:r,setting_type:"raw_settings",complete:function(){var n=e.settings,r={urlVersion:e.outputVersion||"v1",settingsVersion:e.version,settingsTIme:Date.now()};n.entry_info=e.entry_info,On.setCDNUrl({model_base_url:e.modelBaseUrl,info_base_url:e.infoBaseUrl,template_base_url:e.templateBaseUrl,picture_base_url:e.pictureBaseUrl}),On.convertVersion(r),Mn.adapter(n,e),t(JSON.parse(JSON.stringify(Mn)))},failure:function(){n()}});break;case"dsm":On.createUrl({id:r,setting_type:"raw_settings",complete:function(){var n=e.settings,r={urlVersion:e.outputVersion||"v1",settingsVersion:e.version,settingsTIme:Date.now()};n.entry_info=e.entry_info,On.setCDNUrl({model_base_url:e.modelBaseUrl,info_base_url:e.infoBaseUrl,template_base_url:e.templateBaseUrl,picture_base_url:e.pictureBaseUrl}),On.convertVersion(r),Dn.adapter(n,e),t(JSON.parse(JSON.stringify(Dn)))},failure:function(){n()}});break;case"purepano":cn(e,(function(e){t(e)}))}}else console.error("".concat(Vn),"args:",e)},Fn.clear=function(){},Object.defineProperties(Fn,{resUrls:{get:function(){return On}}});var Bn=function(e){var t;return e.outputVersion="v1","purepano"===e.type&&Object.assign(e,{entry_info:{anima:e.entry_info.mode,rotation:e.entry_info.rotation},pano_support:"6cube",pano_pic:{imgs:e.pano_addr_list}}),Fn.init(e,(function(e){return t=e})),"purepano"!==e.type&&(t.entry_info.floorplan_rotate_angle=e.floorplanRotateAngle),t},Xn=function(e){var t;return e.outputVersion="v2","purepano"===e.type&&Object.assign(e,{entry_info:{anima:e.entry_info.mode,rotation:e.entry_info.rotation},pano_support:"6cube",pano_pic:{imgs:e.pano_addr_list}}),Fn.init(e,(function(e){return t=e})),"purepano"!==e.type&&(t.entry_info.floorplan_rotate_angle=e.floorplanRotateAngle),t},qn=new Map([[["cloud","offline"],Jt],[["open"],en],[["model"],on]]),$n={"<1.0.0":Jt,"1.0.0":Jt,">=1.0.0 <2.0.0":en},Hn=new Map([[["cloud"],{">=0.0.0 <4.0.0":Jt}],[["offline"],{">=0.0.0 <4.0.0":Jt}],[["open"],{">=0.0.0 <4.0.0":en}],[["model"],{">=0.0.0 <4.0.0":on}]]),Yn=new Map([[["initData","iCoreScanModelData","iCoreVirtualModelData","iCorePurepanoData","iCoreDsmModelData","iScanModelData","iVirtualModelData","iPurepanoData","iDsmModelData"],Bn]]),Wn={">=1.0.0 <1.1.0":Bn,">=1.1.0 <1.2.0":Xn},Jn=new Map([[["initData","iCoreScanModelData","iCoreVirtualModelData","iCorePurepanoData","iCoreDsmModelData","iScanModelData","iVirtualModelData","iPurepanoData","iDsmModelData"],{">=0.0.0 <1.3.0":Bn,">=1.3.0 <2.0.0":Xn}]]),Zn=function(e,t,n,r){var o=function(e,t){var n,r=i(e.entries());try{for(r.s();!(n=r.n()).done;){var o=u(n.value,2),a=o[0],l=o[1];if(a.includes(t))return l}}catch(e){r.e(e)}finally{r.f()}return null}(e,r);if(o)return o;var a=r.split("-");if(2===a.length){var l=function(e,t,n){var r,o=i(e.entries());try{for(o.s();!(r=o.n()).done;){var a=u(r.value,2),l=a[0],c=a[1];if(l.includes(t))return qt(c,n)}}catch(e){o.e(e)}finally{o.f()}return null}(n,a[0],a[1]);if(l)return l}var c=qt(t,r);return c||null},Kn=function(){return o((function e(t,r,o,i,a,l){n(this,e),this.inputAliasMap=t,this.inputVersionMap=r,this.inputAliasVersionMap=o,this.outputAliasMap=i,this.outputVersionMap=a,this.outputAliasVersionMap=l}),[{key:"adapt",value:function(e,t,n){if(!e)throw new Error("Invalid version ".concat(e,"!"));if(!t)throw new Error("Invalid version ".concat(t,"!"));var r=Zn(this.inputAliasMap,this.inputVersionMap,this.inputAliasVersionMap,e);if(!r)throw new Error("Version ".concat(e," is not supported."));var o=Zn(this.outputAliasMap,this.outputVersionMap,this.outputAliasVersionMap,t);if(!o)throw new Error("Version ".concat(o," is not supported."));return o(r(n))}}])}(),Qn=new Kn(qn,$n,Hn,Yn,Wn,Jn),er=Object.freeze({__proto__:null,adapt:function(e,t,n){return Qn.adapt(e,t,n)}}),tr=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).floorplan;if(!e||!e.info||!e.floors||0===e.floors.length)return null;var t=e.info,n=e.floors,r=e.houseplan_pic,o=n.map((function(e){var t=e.info,n=e.plan,o=r.outline.find((function(t){return t.floor_index===e.info.flooridx&&1===t.source})),i=n?n.plan_position:null;return{index:t.flooridx,outline:o,planPosition:i}}));return{rotation:(null==t?void 0:t.rotation)||0,floors:o}},nr=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).floorplan;if(!e||!e.info||!e.floors||0===e.floors.length)return null;var t=e.info,n=e.floors,r=e.houseplan_pics,o=n.map((function(e){var t=e.info,n=e.plan,o=r.find((function(t){return t.floor_index===e.info.flooridx&&1===t.type})),i=n?n.plan_position:null;return{index:t.flooridx,outline:o,planPosition:i}}));return{rotation:(null==t?void 0:t.rotation)||0,floors:o}},rr=2*Math.PI,or=[0,0],ir=function(e,t){return or[0]=e,or[1]=t,or},ar=[0,0],lr=function(e,t,n,r){return o=e+n,i=t+r,ar[0]=o,ar[1]=i,ar;var o,i},cr=function(e,t,n,r){return ir(n-e,r-t)},sr=cr,ur=cr,pr=function(e,t,n,r){return e*n+t*r},fr=function(e,t,n){return ir(e*n,t*n)},dr=function(e,t,n,r){return e*r-t*n},hr=Math,_r=hr.cos,vr=hr.sin,mr=hr.sqrt,gr=function(e,t){return mr(pr(e,t,e,t))},yr=function(e,t){var n=gr(e,t);return 0===n&&function(e){throw new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Error)(e)}("Zero Vector CAN NOT be normalized."),ir(e/n,t/n)},br=function(e,t,n){var r=_r(n),o=vr(n);return ir(e*r-t*o,e*o+t*r)},wr=1e-6,Er=function(e,t){var n=e-t;return n<wr&&n>-1e-6},Or=Object.freeze({__proto__:null,angleTo:function(e,t,n,r){var o=p(yr(e,t)),i=p(yr(n,r)),a=Math.atan2(dr.apply(void 0,p(o).concat(p(i))),pr.apply(void 0,p(o).concat(p(i))));return a<0?a+2*Math.PI:a},cross:dr,dot:pr,equal:function(e,t,n,r){return Er(e,n)&&Er(t,r)},from:ur,fromBothPoint:cr,fromSegment:sr,invert:function(e,t){return ir(-e,-t)},length:gr,multiply:fr,normalize:yr,project:function(e,t,n,r){var o=yr(n,r);return fr.apply(void 0,p(o).concat([pr.apply(void 0,[e,t].concat(p(o)))]))},rotate:br,rotate90:function(e,t){return ir(-t,e)},slope:function(e,t){var n=Math.atan2(t,e);return n<0?n+rr:n}}),xr=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=cr(r,o,e,t);return lr.apply(void 0,p(br.apply(Or,p(i).concat([n]))).concat([r,o]))},Ir=function(e){if(!e)return null;var t=e.rotation,n=-t,r=e.floors.map((function(e){var t=e.index,r=e.outline,o=e.planPosition,i=o?o.map((function(e){return function(e,t){var n=u(xr(e.x,e.z,t),2),r=n[0],o=n[1];return{x:r,y:e.y,z:o}}({x:(t=e.position)[0],y:t[1],z:t[2]},n);var t})):null;return{index:t,plane_position:r&&1===r.source?i:null}}));return{rotation:t,floors:r}},Lr=new Kn(new Map([[["cloud","offline"],tr],[["open"],nr]]),{"<1.0.0":tr,"1.0.0":tr,">=1.0.0 <2.0.0":nr},new Map([[["cloud"],{">=0.0.0 <4.0.0":tr}],[["offline"],{">=0.0.0 <4.0.0":tr}],[["open"],{">=0.0.0 <4.0.0":nr}]]),new Map([[["FloorsData","setFloorData"],Ir]]),{">=0.0.0 <2.0.0":Ir},new Map([[["FloorsData","setFloorData"],{">=0.0.0 <2.0.0":Ir}]])),Rr=Object.freeze({__proto__:null,adapt:function(e,t,n){return Lr.adapt(e,t,n)}}),Nr=function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).floorplan;if(!t||!t.floors||0===t.floors.length)return null;var n=t.entrance&&t.entrance.exist_entrance?{center_point:t.entrance.position,normal_vector:t.entrance.normal_vector}:null,r=t.floors.map((function(e,n){var r=e.info,o=e.plan,i=e.rooms,a=void 0!==(null==r?void 0:r.flooridx)?r.flooridx:n,l=t.houseplan_pic.outline.find((function(e){return e.floor_index===a})),c=o?o.plan_position:null;return{flooridx:a,outline:l,planPosition:c,rooms:Array.isArray(i)?i.map((function(e){var t=e.info,n=t.area,r=t.name,o=t.room_center_point;return{name:r,area:n,roomCenterPosition:o.position,roomCenterUv:o.uv}})):[]}}));return{rotation:(null===(e=t.info)||void 0===e?void 0:e.rotation)||0,entrance:n,floors:r}},Ar=function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).floorplan;if(!t||!t.floors||0===t.floors.length)return null;var n=t.entrance&&t.entrance.exist_entrance?{center_point:t.entrance.position,normal_vector:t.entrance.normal_vector}:null,r=t.floors.map((function(e,n){var r=e.info,o=e.plan,i=e.rooms,a=void 0!==(null==r?void 0:r.flooridx)?r.flooridx:n,l=t.houseplan_pics.find((function(e){return e.floor_index===a})),c=o?o.plan_position:null;return{flooridx:a,outline:l,planPosition:c,rooms:Array.isArray(i)?i.map((function(e){var t=e.info,n=t.area,r=t.name,o=t.room_center_point;return{name:r,area:n,roomCenterPosition:o.position,roomCenterUv:o.uv}})):[]}}));return{rotation:(null===(e=t.info)||void 0===e?void 0:e.rotation)||0,entrance:n,floors:r}},Sr=function(e){return{x:e[0],y:e[1],z:e[2]}},kr=function(e,t){var n=u(xr(e.x,e.z,t),2),r=n[0],o=n[1];return{x:r,y:e.y,z:o}},Tr=function(e){if(!e)return null;var t=e.rotation,n=e.entrance,r=e.floors,o=-t,i={rotation:t};return{entrance:n?{center_point:kr(Sr(n.center_point),o),normal_vector:kr(Sr(n.normal_vector),o)}:null,floors:r.map((function(e){var t=e.flooridx,n=e.outline,r=e.planPosition,i=e.rooms,a=r?r.map((function(e){return kr(Sr(e.position),o)})):null,l=i.map((function(e){var t=e.area,n=e.name,r=e.roomCenterPosition,i=e.roomCenterUv;return{info:{name:n,area:t,center_point:kr(Sr(r),o),center_point_uv:i}}}));return{info:{flooridx:t},plan:n?{source:n.source,path:n.path,plan_position:1===n.source?a:null}:null,rooms:l}})),info:i}},jr=new Kn(new Map([[["cloud","offline"],Nr],[["open"],Ar]]),{"<1.0.0":Nr,"1.0.0":Nr,">=1.0.0 <2.0.0":Ar},new Map([[["cloud"],{">=0.0.0 <4.0.0":Nr}],[["offline"],{">=0.0.0 <4.0.0":Nr}],[["open"],{">=0.0.0 <4.0.0":Ar}]]),new Map([[["FloorplanData","load"],Tr]]),{">=0.0.0 <2.0.0":Tr},new Map([[["FloorplanData","load"],{">=0.0.0 <2.0.0":Tr}]])),Mr=Object.freeze({__proto__:null,adapt:function(e,t,n){return jr.adapt(e,t,n)}}),Pr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.hotspotTagList||!e.scene)return null;var t=e.scene;return e.hotspotTagList.list.map((function(e){return{model_id:t.res_id,id:e.id,visible:e.visible,width:Number(e.width),height:Number(e.height),position:{x:e.position.x,y:e.position.y,z:e.position.z},rotation:{w:e.rotation.w,x:e.rotation.x,y:e.rotation.y,z:e.rotation.z},normal:e.normal,scale:{x:e.scale.x,y:e.scale.y,z:e.scale.z},location_id:e.location_id,location_line:{visible:e.location_line.visible,length:e.location_line.length,line_color:e.location_line.lineColor,line_width:e.location_line.lineWidth},cover:{src:e.src,visible:!e.src_config.no_visible,type:e.src_config.type,scale:e.src_config.scale,bg_color:e.src_config.bg_color},title:{text:e.content.title_info.text,visible:!e.content.title_config.no_visible,bg_color:e.content.title_config.bgColor,font_color:e.content.title_config.fontColor,font_height:e.content.title_config.fontHeight},tag_size:t.label_config.tag_size}}))},zr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.hotspotTagList||!e.scene)return[];var t=e.scene;return e.hotspotTagList.list.map((function(e){return{model_id:t.model_id,id:e.id,visible:e.visible,width:Number(e.width),height:Number(e.height),position:{x:e.position.x,y:e.position.y,z:e.position.z},rotation:{w:e.rotation.w,x:e.rotation.x,y:e.rotation.y,z:e.rotation.z},normal:e.position_normal,scale:{x:e.scale.x,y:e.scale.y,z:e.scale.z},location_id:e.location_id,location_line:{visible:e.location_line.visible,length:e.location_line.length,line_color:e.location_line.lineColor,line_width:e.location_line.lineWidth},cover:{src:e.cover,visible:!e.cover_config.no_visible,type:e.cover_config.type,scale:e.cover_config.scale,bg_color:e.cover_config.bg_color},title:{text:e.title_info.text,visible:!e.title_config.no_visible,bg_color:e.title_config.bgColor,font_color:e.title_config.fontColor,font_height:e.title_config.fontHeight},tag_size:t.hotspot_icon_default_size_px}}))},Ur=function(e){return e?e.map((function(e){var t,n,r,o,i,a,l,s,u,p,f=e.location_line,d=e.title,h=e.cover,_=(t=h.src,n=t.match(/\?type=([^&]+)/),"jpeg"===(r=t.match(/\.(png|jpg|gif|jpeg)/)[1])&&(r="jpg"),n?"sprite":r),v=$t(h.src),m="sprite"===_,g=Ht(d.bg_color),y=Ht(h.bg_color),b=e.tag_size||25.6,w={id:e.id,location_id:e.location_id,model_id:e.model_id,visible:e.visible,position:c({},e.position)||{},location_line:{visible:f.visible,color:f.line_color||"rgb(255,255,255)",width:f.line_width||1,length:0===f.length?.6:f.length/100},title:{visible:d.visible,text:d.text,font_size:d.font_height||0,font_color:d.font_color||0,bg_color:g},face:{src:h.src,type:_,width:e.width,height:e.height,visible:h.visible,scale:Number((b*(h.scale/100/44)).toFixed(2)),bg_color:(o=y,i=o.r,a=o.g,l=o.b,s=Math.round(i).toString(16).padStart(2,"0"),u=Math.round(a).toString(16).padStart(2,"0"),p=Math.round(l).toString(16).padStart(2,"0"),"".concat(s).concat(u).concat(p)),bg_opacity:y.a,tile_count:m?v.height/v.width:null,tile_duration:m?1e3/(v.height/v.width):null,tile_vertical:m?v.height/v.width:null,tile_horizontal:m?1:null,tile_order:1}};return e.rotation&&Object.keys(e.rotation).length?w.rotation={x:e.rotation.x||e.rotation._x||0,y:e.rotation.y||e.rotation._y||0,z:e.rotation.z||e.rotation._z||0,w:e.rotation.w||e.rotation._w||0}:w.normal=e.normal,w})):[]},Dr=new Kn(new Map([[["cloud","offline"],Pr],[["open"],zr]]),{"<1.0.0":Pr,"1.0.0":Pr,">=1.0.0 <2.0.0":zr},new Map([[["cloud"],{">=0.0.0 <4.0.0":Pr}],[["offline"],{">=0.0.0 <4.0.0":Pr}],[["open"],{">=0.0.0 <4.0.0":zr}]]),new Map([[["load","HotspotTagLoadOptions"],Ur]]),{">=0.0.0 <2.0.0":Ur},new Map([[["load","HotspotTagLoadOptions"],{">=0.0.0 <2.0.0":Ur}]])),Cr=Object.freeze({__proto__:null,adapt:function(e,t,n){return Dr.adapt(e,t,n)}}),Gr=[1,2,4,5],Fr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.placementList?(e.placementList.list||e.placementList).filter((function(e){return Gr.includes(e.type)})).map((function(e){return{id:e.id,src:e.src,loop:e.loop,type:e.type,cover:e.cover,depth:e.depth,scale:e.scale,title:e.title,width:e.width,height:e.height,format:e.format,extend:e.extend,normal:e.normal,rotate:e.rotate,visible:e.visible,position:e.position,close_bgm:e.close_bgm,translate:e.translate,base_depth:e.base_depth,base_width:e.base_width,base_height:e.base_height,quaternion:e.quaternion,screen_stretch:e.screen_stretch,location_id:e.location_id,location_visible:e.location_visible,distance_of_normal:e.distance_of_normal,proportional_scaling:e.proportional_scaling}})):[]},Vr=[1,2,4,5],Br=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.placementList?(e.placementList.list||e.placementList).filter((function(e){return Vr.includes(e.type)})).map((function(e){return{id:e.id,src:e.src,loop:e.loop,type:e.type,cover:e.cover,depth:e.depth,scale:e.scale,title:e.title,width:e.width,height:e.height,format:e.format,extend:e.extend,normal:e.normal,rotate:e.rotate,visible:e.visible,position:e.position,close_bgm:e.close_bgm,translate:e.translate,base_depth:e.base_depth,base_width:e.base_width,base_height:e.base_height,quaternion:e.quaternion,screen_stretch:e.screen_stretch,location_id:e.location_id,location_visible:e.location_visible,distance_of_normal:e.distance_of_normal,proportional_scaling:e.proportional_scaling}})):[]},Xr={1:"photo",2:"video",4:"sprite",5:"video"},qr=function(e){return e.map((function(e){var t={id:e.id,fill_type:e.screen_stretch?"full":"auto",loop_play:e.loop,width:e.base_width/1e3,height:e.base_height/1e3,material_list:[{cover:e.cover,type:Xr[e.type],src:e.src}],position:e.position,quaternion:e.quaternion,scale:e.scale,transform_data:{translate:e.translate,rotate:e.rotate,scale:e.scale},visible:e.visible};return 2===e.type&&(t.material_list[0].auto_play=e.extend.auto_play),4===e.type&&(t.material_list[0].tile_config={count:24,duration:1e3/24,vertical:$t(e.src).width>$t(e.src).height?1:24,horizontal:$t(e.src).width>$t(e.src).height?24:1}),5===e.type&&(t.material_list[0].cover="",t.material_list[0].green_screen_config={look_at_camera:e.extend.face_screen,filter_color:e.extend.bg_color,fill_color:"000000",fill_opacity:0}),t}))},$r=new Kn(new Map([[["cloud","offline"],Fr],[["open"],Br]]),{"<1.0.0":Fr,"1.0.0":Fr,">=1.0.0 <2.0.0":Br},new Map([[["cloud"],{">=0.0.0 <4.0.0":Fr}],[["offline"],{">=0.0.0 <4.0.0":Fr}],[["open"],{">=0.0.0 <4.0.0":Br}]]),new Map([[["Group2dData","load"],qr]]),{">=0.0.0 <2.0.0":qr},new Map([[["Group2dData","load"],{">=0.0.0 <2.0.0":qr}]])),Hr=Object.freeze({__proto__:null,adapt:function(e,t,n){return $r.adapt(e,t,n)}}),Yr=[0,3],Wr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.placementList?(e.placementList.list||e.placementList).filter((function(e){return Yr.includes(e.type)})).map((function(e){return{id:e.id,src:e.src,loop:e.loop,type:e.type,cover:e.cover,depth:e.depth,scale:e.scale,title:e.title,width:e.width,height:e.height,format:e.format,extend:e.extend,normal:e.normal,rotate:e.rotate,visible:e.visible,position:e.position,close_bgm:e.close_bgm,translate:e.translate,base_depth:e.base_depth,base_width:e.base_width,base_height:e.base_height,quaternion:e.quaternion,screen_stretch:e.screen_stretch,location_id:e.location_id,location_visible:e.location_visible,distance_of_normal:e.distance_of_normal,proportional_scaling:e.proportional_scaling}})):[]},Jr=[0,3],Zr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.placementList?(e.placementList.list||e.placementList).filter((function(e){return Jr.includes(e.type)})).map((function(e){return{id:e.id,src:e.src,loop:e.loop,type:e.type,cover:e.cover,depth:e.depth,scale:e.scale,title:e.title,width:e.width,height:e.height,format:e.format,extend:e.extend,normal:e.normal,rotate:e.rotate,visible:e.visible,position:e.position,close_bgm:e.close_bgm,translate:e.translate,base_depth:e.base_depth,base_width:e.base_width,base_height:e.base_height,quaternion:e.quaternion,screen_stretch:e.screen_stretch,location_id:e.location_id,location_visible:e.location_visible,distance_of_normal:e.distance_of_normal,proportional_scaling:e.proportional_scaling}})):[]},Kr=function(e){return e.map((function(e){var t={type:"glb"===e.format?"gltf":e.format,id:e.id,data:{opacity:1,bounding_box_color:16777215},position:e.position,quaternion:e.quaternion,scale:e.scale,visible:!0};return"box"===e.format?c(c({},t),{},{data:c(c({},t.data),{},{width:e.width/1e3,height:e.height/1e3,depth:e.depth/1e3,color:16777215,opacity:.3,bounding_box_color:16777215})}):"gltf"===e.format||"glb"===e.format?c(c({},t),{},{data:c(c({},t.data),{},{src:e.src})}):void 0}))},Qr=new Kn(new Map([[["cloud","offline"],Wr],[["open"],Zr]]),{"<1.0.0":Wr,"1.0.0":Wr,">=1.0.0 <2.0.0":Zr},new Map([[["cloud"],{">=0.0.0 <4.0.0":Wr}],[["offline"],{">=0.0.0 <4.0.0":Wr}],[["open"],{">=0.0.0 <4.0.0":Zr}]]),new Map([[["Group3dData","load"],Kr]]),{">=0.0.0 <2.0.0":Kr},new Map([[["Group3dData","load"],{">=0.0.0 <2.0.0":Kr}]])),eo=Object.freeze({__proto__:null,adapt:function(e,t,n){return Qr.adapt(e,t,n)}}),to=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).scene;return e?{top_mask:{url:e.blind_logo.sky.src,size:e.blind_logo.sky.size},foot_mask:{url:e.blind_logo.ground.src,size:e.blind_logo.ground.size}}:{}},no=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).scene;return e?{top_mask:{url:e.top_mask_logo,size:e.top_mask_logo_size},foot_mask:{url:e.bottom_mask_logo,size:e.bottom_mask_logo_size}}:{}},ro=function(e){return{top_mask:{url:e.top_mask.url,size:(e.top_mask.size||100)/100},foot_mask:{url:e.foot_mask.url,size:(e.foot_mask.size||100)/100}}},oo=new Kn(new Map([[["cloud","offline"],to],[["open"],no]]),{"<1.0.0":to,"1.0.0":to,">=1.0.0 <2.0.0":no},new Map([[["cloud"],{">=0.0.0 <4.0.0":to}],[["offline"],{">=0.0.0 <4.0.0":to}],[["open"],{">=0.0.0 <4.0.0":no}]]),new Map([[["MaskData","addSceneFootMask","addPanoramaTopMask","addPanoramaBottomMask"],ro]]),{">=0.0.0 <2.0.0":ro},new Map([[["MaskData","addSceneFootMask","addPanoramaTopMask","addPanoramaBottomMask"],{">=0.0.0 <2.0.0":ro}]])),io=Object.freeze({__proto__:null,adapt:function(e,t,n){return oo.adapt(e,t,n)}}),ao=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.measure)return[];var t=e.measure,n=t.flat_mode,r=void 0===n?[]:n,o=t.roaming_mode,i=void 0===o?[]:o;return r.concat(i).map((function(e){return{info_type:e.info_type,mode_type:e.mode_type,visible:e.visible,location_id:e.location_id,area:e.area,floor_list:e.floor_list,lines_info:e.lines_info.map((function(e){return{distance:e.distance}})),points:e.points.map((function(e){return{x:e.x,y:e.y,z:e.z}})),model_id:e.model_id}}))},lo={1:"distance",2:"area"},co={1:"panorama",2:"floorplan"},so=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.measure?(e.measure.list||e.measure).map((function(t){return{info_type:lo[t.info_type],mode_type:co[t.mode_type],visible:t.visible,location_id:t.location_id,area:t.area,floor_list:t.floor_list,lines_info:t.lines_info.map((function(e){return{distance:e.distance}})),points:t.points.map((function(e){return{x:e.x,y:e.y,z:e.z}})),model_id:e.scene.model_id}})):[]},uo=function(e){return e.map((function(e){return{view_mode:e.mode_type,mode:e.info_type,points:e.points,model_id:e.model_id,location_id:e.location_id,line_labels:e.lines_info.map((function(e){return e.distance+"m"})),area_label:e.area+"㎡",floor_list:e.floor_list,visible:e.visible}}))},po=new Kn(new Map([[["cloud","offline"],ao],[["open"],so]]),{"<1.0.0":ao,"1.0.0":ao,">=1.0.0 <2.0.0":so},new Map([[["cloud"],{">=0.0.0 <4.0.0":ao}],[["offline"],{">=0.0.0 <4.0.0":ao}],[["open"],{">=0.0.0 <4.0.0":so}]]),new Map([[["load","MeasureLoadOptions","MeasureLoadData"],uo]]),{">=0.0.0 <2.0.0":uo},new Map([[["load","MeasureLoadOptions","MeasureLoadData"],{">=0.0.0 <2.0.0":uo}]])),fo=Object.freeze({__proto__:null,adapt:function(e,t,n){return po.adapt(e,t,n)}}),ho=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.measure)return[];var t=e.measure,n=t.flat_mode,r=void 0===n?[]:n,o=t.roaming_mode,i=void 0===o?[]:o;return r.concat(i).map((function(e){return{info_type:e.info_type,mode_type:e.mode_type,visible:e.visible,location_id:e.location_id,area:e.area,floor_list:e.floor_list,lines_info:e.lines_info.map((function(e){return{distance:e.distance}})),points:e.points.map((function(e){return{x:e.x,y:e.y,z:e.z}})),model_id:e.model_id}}))},_o={1:"distance",2:"area"},vo={1:"panorama",2:"floorplan"},mo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.measure?(e.measure.list||e.measure).map((function(t){return{info_type:_o[t.info_type],mode_type:vo[t.mode_type],visible:t.visible,location_id:t.location_id,area:t.area,floor_list:t.floor_list,lines_info:t.lines_info.map((function(e){return{distance:e.distance}})),points:t.points.map((function(e){return{x:e.x,y:e.y,z:e.z}})),model_id:e.scene.model_id}})):[]},go=function(e){if(!e.length)return[];var t=e.map((function(e){return{view_mode:e.mode_type,mode:e.info_type,points:e.points,model_id:e.model_id,location_id:e.location_id,line_labels:e.lines_info.map((function(e){return e.distance+"m"})),area_label:e.area+"㎡",floor_list:e.floor_list,visible:e.visible}}));return[{model_id:e[0].model_id,measureList:t}]},yo=new Kn(new Map([[["cloud","offline"],ho],[["open"],mo]]),{"<1.0.0":ho,"1.0.0":ho,">=1.0.0 <2.0.0":mo},new Map([[["cloud"],{">=0.0.0 <4.0.0":ho}],[["offline"],{">=0.0.0 <4.0.0":ho}],[["open"],{">=0.0.0 <4.0.0":mo}]]),new Map([[["load","MeasureData"],go]]),{">=0.0.0 <2.0.0":go},new Map([[["load","MeasureData"],{">=0.0.0 <2.0.0":go}]])),bo=Object.freeze({__proto__:null,adapt:function(e,t,n){return yo.adapt(e,t,n)}}),wo={0:1,1:6,2:8,3:10,4:20,5:40,6:60},Eo={0:3e3,1:2500,2:2e3,3:1500,4:1e3,5:750,6:500},Oo={1:"model",2:"virtual",3:"purepano",4:"dsm"},xo=1,Io=2,Lo=function(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).scene,r=n.navigator_config,o=(null===(e=n.navigator_view)||void 0===e||null===(t=e.list[0])||void 0===t?void 0:t.list)||[];return n&&o?{viewList:o.map((function(e){var t,o,i,a,l,c,s,u,p,f=e.model_type||xo,d={switch_animation:null==e||null===(t=e.config)||void 0===t?void 0:t.switch_animation,rotate_director:null==e||null===(o=e.config)||void 0===o?void 0:o.rotate_director,need_to_rotate:null==e||null===(i=e.config)||void 0===i?void 0:i.need_to_rotate,rotate_angle:null==e||null===(a=e.config)||void 0===a?void 0:a.rotate_angle,rotate_time:null==e||null===(l=e.config)||void 0===l?void 0:l.rotate_time,rotate_type:null==e||null===(c=e.config)||void 0===c?void 0:c.rotate_type,rotate_speed:wo[null==e?void 0:e.rotate_speed]||10},h={switch_animation:null==e||null===(s=e.config_3d)||void 0===s?void 0:s.switch_type_3d,stay_time:null==e||null===(u=e.config_3d)||void 0===u?void 0:u.stay_time_3d,switch_speed:Eo[e.switch_speed_3d||3]},_=f===xo?e.camera_rotation:f===Io?e.navigate_camera_quaternion_3d:void 0;return{scene_id:n.id,mode_type:f,name:e.name,cover:e.cover,camera_rotation:_,camera_position:(null==e?void 0:e.navigate_camera_position_3d)||(null==e?void 0:e.camera_position_3d),camera_target:(null==e?void 0:e.navigate_camera_target_3d)||(null==e?void 0:e.camera_target),location_id:e.location_id||null,zoom:e.perspective_zoom_ratio||1,config:d,config_3d:h,scene_type:Oo[n.type]||"model",play_priority:r.default_guide_play_priority||2,audio_guide_info:{name:(null===(p=e.audio)||void 0===p?void 0:p.name)||"",path:e.audio}}})),globalConf:{play_priority:n.default_guide_play_priority||2,fade_animation_time:500,fixed_animation_time:1500,fixed_lookat_animation_time:1500,fade_animation_3d_time:500,fixed_animation_3d_time:1500}}:{}},Ro={1:"model",2:"virtual",3:"purepano"},No=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scene,n=e.navigatorViewList;return t&&n?{viewList:n.map((function(e){var n;return{scene_id:t.id,name:e.name,cover:e.cover,camera_rotation:e.camera_rotation,location_id:e.location_id,config:{switch_animation:e.change_type,rotate_director:e.rotate_orient||1,rotate_type:e.rotate_type,rotate_speed:e.rotate_speed_level||10,rotate_angle:e.rotate_angle_degree,need_to_rotate:e.view_rotate_enabled||!0,rotate_time:e.rotate_second},scene_type:Ro[t.type]||"model",audio_guide_info:{name:(null===(n=e.audio)||void 0===n?void 0:n.name)||"",path:e.audio}}})),globalConf:{play_priority:t.default_guide_play_priority||2}}:{}},Ao=function(e){return e.viewList},So=function(e){return e.globalConf},ko=new Kn(new Map([[["cloud","offline"],Lo],[["open"],No]]),{"<1.0.0":Lo,"1.0.0":Lo,">=1.0.0 <2.0.0":No},new Map([[["cloud"],{">=0.0.0 <4.0.0":Lo}],[["offline"],{">=0.0.0 <4.0.0":Lo}],[["open"],{">=0.0.0 <4.0.0":No}]]),new Map([[["viewList","ViewList","loadViewList","NavigatorViewData","navigatorViewData"],Ao],[["GlobalConfig","setGlobalConfig"],So]]),{">=0.0.0 <2.0.0":Ao},new Map([[["viewList","ViewList","loadViewList","NavigatorViewData","navigatorViewData"],{">=0.0.0 <2.0.0":Ao}],[["GlobalConfig","setGlobalConfig"],{">=0.0.0 <2.0.0":So}]])),To=Object.freeze({__proto__:null,adapt:function(e,t,n){return ko.adapt(e,t,n)}}),jo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scenes,n=e.group;if(!t&&!n)return[];var r=((null==t?void 0:t.struct)||(null==n?void 0:n.list)||n).map((function(e){var t=e.subset.map((function(e){return{pid:e.pid,id:e.id,scene_id:e.parent_scene_id,name:e.name,cover:e.cover,type:e.type,viewports:e.subset.map((function(e){return{camera_rotation:JSON.parse(JSON.stringify(e.camera_rotation)),config:{rotate_angle:e.rotate_angle||0,rotate_director:e.rotate_director||1,rotate_time:e.rotate_time||0,switch_animation:e.switch_animation||1},cover:e.cover,id:e.id,location_id:e.location_id,name:e.name,pid:e.pid,scene_id:e.scene_id,type:e.type}}))}}));return{id:e.id,name:e.name,type:e.type,scenes:t}}));return r},Mo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scenes,n=e.group;if(!t&&!n)return[];var r=((null==t?void 0:t.struct)||(null==n?void 0:n.list)||n).map((function(e){var t=e.scenes.map((function(t){return{pid:e.pid,id:t.id,scene_id:t.id,name:t.name,cover:t.cover_pic,type:t.type,viewports:t.viewports.map((function(e){return{camera_rotation:JSON.parse(JSON.stringify(e.camera_rotation)),config:{rotate_angle:e.rotate_angle||0,rotate_director:e.rotate_director||1,rotate_time:e.rotate_time||0,switch_animation:e.switch_animation||1},cover:e.cover,id:e.id,location_id:e.location_id,name:e.name,pid:e.nb_scene_id,scene_id:e.scene_id,type:e.type}}))}}));return{id:e.id,name:e.name,type:e.type,cover:e.cover_pic,scenes:t}}));return r},Po=function(e){return e.map((function(e){var t=e.scenes.map((function(e){return{pid:e.pid,id:e.id,scene_id:e.scene_id,name:e.name,cover:e.cover,type:e.type,viewports:e.viewports}}));return{id:e.id,name:e.name,type:e.type,scenes:t}}))},zo=new Kn(new Map([[["cloud","offline"],jo],[["open"],Mo]]),{"<1.0.0":jo,"1.0.0":jo,">=1.0.0 <2.0.0":Mo},new Map([[["cloud"],{">=0.0.0 <4.0.0":jo}],[["offline"],{">=0.0.0 <4.0.0":jo}],[["open"],{">=0.0.0 <4.0.0":Mo}]]),new Map([[["sceneGroup","SceneGroup","scenegroup"],Po]]),{">=0.0.0 <2.0.0":Po},new Map([[["sceneGroup","SceneGroup","scenegroup"],{">=0.0.0 <2.0.0":Po}]])),Uo=Object.freeze({__proto__:null,adapt:function(e,t,n){return zo.adapt(e,t,n)}});e.blindSpotMask=io,e.bundle='"2024-11-07T02:28:49.609Z"',e.core=er,e.floorplan=Rr,e.floorplanApp=Mr,e.hotspotTag=Cr,e.measure3d=fo,e.measureApp=bo,e.navigatorViewApp=To,e.put2d=Hr,e.put3d=eo,e.sceneGroup=Uo,e.version='"1.2.0"'}));
